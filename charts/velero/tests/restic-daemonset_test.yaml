suite: Restic DaemonSet
templates:
  - restic-daemonset.yaml
tests:
  - it: is not created by default
    values:
      - base-values.yaml
    asserts:
      - hasDocuments:
          count: 0
  - it: is created when enabled
    set:
      restic.enabled: true
    values:
      - base-values.yaml
    asserts:
      - isKind:
          of: DaemonSet
  - it: is created when enabled (legacy)
    set:
      deployRestic: true
    values:
      - base-values.yaml
    asserts:
      - isKind:
          of: DaemonSet
